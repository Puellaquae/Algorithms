#include <iostream>
#include <map>
#include <queue>
#include <tuple>
#include <vector>
using namespace std;

class Solution {
public:
    int minRefuelStops(int target, int startFuel,
                        const vector<vector<int>> &stations) {
        priority_queue<int> q;
        int ans = 0, pos = 0, fuel = startFuel;
        for (auto &stat : stations) {
            fuel -= stat[0] - pos;
            while (fuel < 0 && !q.empty()) {
                fuel += q.top();
                q.pop();
                ans++;
            }
            if (fuel < 0) {
                return -1;
            }
            q.emplace(stat[1]);
            pos = stat[0];
        }
        fuel -= target - pos;
        while (fuel < 0 && !q.empty()) {
            fuel += q.top();
            q.pop();
            ans++;
        }
        if (fuel < 0) {
            return -1;
        }
        return ans;
    }
};

int main() {
    Solution s;
    cout << s.minRefuelStops(1, 1, {}) << endl;
    cout << s.minRefuelStops(100, 1, {{10, 100}}) << endl;
    cout << s.minRefuelStops(100, 50, {{25, 30}}) << endl;
    cout << s.minRefuelStops(100, 10, {{10, 60}, {20, 30}, {30, 30}, {60, 40}})
         << endl;
    cout << s.minRefuelStops(1000000000, 145267354,
                              {{5510987, 84329695},    {10682248, 76273791},
                               {56227783, 136858069},  {91710087, 18854476},
                               {111148380, 127134059}, {165982642, 122930004},
                               {184216180, 124802819}, {217578071, 7123113},
                               {233719001, 95862544},  {339631786, 7676497},
                               {349762649, 136128214}, {403119403, 21487501},
                               {423890164, 61095325},  {424072629, 50415446},
                               {572994480, 13561367},  {609623597, 69207102},
                               {662818314, 84432133},  {678679727, 20403175},
                               {682325369, 14288077},  {702137485, 6426204},
                               {716318901, 47662322},  {738137702, 129579140},
                               {761962118, 23765733},  {820353983, 70497719},
                               {895811889, 75533360}})
         << endl;
    cout << s.minRefuelStops(1000, 83,
                              {{47, 220},
                               {65, 1},
                               {98, 113},
                               {126, 196},
                               {186, 218},
                               {320, 205},
                               {686, 317},
                               {707, 325},
                               {754, 104},
                               {781, 105}})
         << endl;
    cout << s.minRefuelStops(
                1000, 36,
                {{7, 13},   {10, 11},  {12, 31},  {22, 14},  {32, 26},
                 {38, 16},  {50, 8},   {54, 13},  {75, 4},   {85, 2},
                 {88, 35},  {90, 9},   {96, 35},  {103, 16}, {115, 33},
                 {121, 6},  {123, 1},  {138, 2},  {139, 34}, {145, 30},
                 {149, 14}, {160, 21}, {167, 14}, {188, 7},  {196, 27},
                 {248, 4},  {256, 35}, {262, 16}, {264, 12}, {283, 23},
                 {297, 15}, {307, 25}, {311, 35}, {316, 6},  {345, 30},
                 {348, 2},  {354, 21}, {360, 10}, {362, 28}, {363, 29},
                 {367, 7},  {370, 13}, {402, 6},  {410, 32}, {447, 20},
                 {453, 13}, {454, 27}, {468, 1},  {470, 8},  {471, 11},
                 {474, 34}, {486, 13}, {490, 16}, {495, 10}, {527, 9},
                 {533, 14}, {553, 36}, {554, 23}, {605, 5},  {630, 17},
                 {635, 30}, {640, 31}, {646, 9},  {647, 12}, {659, 5},
                 {664, 34}, {667, 35}, {676, 6},  {690, 19}, {709, 10},
                 {721, 28}, {734, 2},  {742, 6},  {772, 22}, {777, 32},
                 {778, 36}, {794, 7},  {812, 24}, {813, 33}, {815, 14},
                 {816, 21}, {824, 17}, {826, 3},  {838, 14}, {840, 8},
                 {853, 29}, {863, 18}, {867, 1},  {881, 27}, {886, 27},
                 {894, 26}, {917, 3},  {953, 6},  {956, 3},  {957, 28},
                 {962, 33}, {967, 35}, {972, 34}, {984, 8},  {987, 12}})
         << endl;
}